# 人人都能读懂的react源码解析(大厂高薪必备)

## 4.react源码全局概览(给你一张react源码地图)

视频课程&demos

课程结构:





- Scheduler（调度器）—— 调度任务的优先级，高优任务优先进入**Reconciler**
- Reconciler（协调器）—— 负责找出变化的组件 render阶段
- Renderer（渲染器）—— 负责将变化的组件渲染到页面上 commit阶段
- `render`与`commit`阶段统称为`work`，即`React`在工作中。相对应的，如果任务正在`Scheduler`内调度，就不属于`work`。
- 

### 源码目录结构

源码中主要包括如下部分

- fixtures：为代码贡献者提供的测试React
- packages：主要部分，包含Scheduler，reconciler等
- scripts：react构建相关

下面来看下packages主要包含的模块

- react：核心Api如：React.createElement、React.Component都在这

- 和平台相关render相关的文件夹：

  ```
  react-art：如canvas svg的渲染
  react-dom：浏览器环境
  react-native-renderer：原生相关
  react-noop-renderer：调试或者fiber用
  ```

- 试验性的包

  ```
  react-server        # ssr相关
  react-fetch         # 请求相关
  react-interactions  # 和事件如点击事件相关
  react-reconciler    # 构建节点
  ```

- shared：包含公共方法和变量

- 辅助包：

  ```
  react-is       # 判断类型
  react-client   # 流相关
  react-fetch    # 数据请求相关
  react-refresh  # 热加载相关
  ```

  

- scheduler：调度器相关

- React-reconciler：在render阶段用它来构建fiber节点

### 怎样调试源码

​	本课程使用的react版本是17.0.1，通过下面几步就可以调试源码了，当然你可以用现成的包含本课程所有demo的项目来调试，项目地址

- clone源码：`git clone https://github.com/facebook/react.git`

- 依赖安装：`npm install` or  `yarn`

- build源码：`npm build react,react-dom,scheduler --type=NODE`

- 为源码建立软链：

  ```shell
  cd build/node_modules/react
  npm link
  cd build/node_modules/react-dom
  npm link
  ```

- create-react-app创建项目

  ```shell
  npx create-react-app demo
  npm link react react-dom
  ```

  

  



![_9](/Users/allenchen/Desktop/文章/人人都能读懂的react源码解析(大厂高薪必备)/_9.jpg)